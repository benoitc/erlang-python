{erl_opts, [debug_info]}.

{xref_checks, [
    undefined_function_calls,
    undefined_functions,
    locals_not_used,
    deprecated_function_calls,
    deprecated_functions
]}.

{deps, []}.

{pre_hooks, [
    {clean, "rm -f priv/*.so"},
    {clean, "rm -rf _build/cmake"},
    {"(linux|darwin|solaris)", compile, "./do_cmake.sh"},
    {"(freebsd|netbsd|openbsd)", compile, "./do_cmake.sh"}
]}.

{post_hooks, [
    {"(linux|darwin|solaris)", compile, "./do_build.sh"},
    {"(freebsd|netbsd|openbsd)", compile, "./do_build.sh"}
]}.

{shell, [
    {apps, [erlang_python]}
]}.

{project_plugins, [rebar3_ex_doc]}.

{hex, [
    {doc, ex_doc},
    {files, ["src", "include", "priv", "c_src", "CMakeLists.txt", "do_cmake.sh", "do_build.sh", "rebar.config", "rebar.lock", "README.md", "LICENSE"]}
]}.

{ex_doc, [
    {source_url, <<"https://github.com/benoitc/erlang-python">>},
    {main, <<"readme">>},
    {extras, [
        <<"README.md">>,
        <<"docs/getting-started.md">>,
        <<"docs/ai-integration.md">>,
        <<"docs/type-conversion.md">>,
        <<"docs/context-affinity.md">>,
        <<"docs/streaming.md">>,
        <<"docs/memory.md">>,
        <<"docs/logging.md">>,
        <<"docs/scalability.md">>,
        <<"docs/threading.md">>,
        <<"docs/asyncio.md">>,
        <<"docs/web-frameworks.md">>,
        <<"docs/testing-free-threading.md">>
    ]},
    {groups_for_extras, [
        {<<"Guides">>, [
            <<"docs/getting-started.md">>,
            <<"docs/ai-integration.md">>,
            <<"docs/type-conversion.md">>,
            <<"docs/context-affinity.md">>,
            <<"docs/streaming.md">>,
            <<"docs/memory.md">>,
            <<"docs/logging.md">>
        ]},
        {<<"Advanced">>, [
            <<"docs/scalability.md">>,
            <<"docs/threading.md">>,
            <<"docs/asyncio.md">>,
            <<"docs/web-frameworks.md">>,
            <<"docs/testing-free-threading.md">>
        ]}
    ]}
]}.
